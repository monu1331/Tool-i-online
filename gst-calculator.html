<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GST Calculator — Tool i online</title>
  <meta name="description" content="GST calculator: compute inclusive/exclusive prices, split CGST/SGST/IGST, rounding and export. Purple theme." />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{ --purple:#5E35B1; --purple-dark:#4a148c; --bg:#ffffff; --muted:#666; --card-radius:12px; --shadow:0 12px 30px rgba(74,20,140,0.08); --maxw:1100px }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:var(--bg);color:#111}
    .wrap{max-width:var(--maxw);margin:18px auto;padding:16px}
    header{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .logo-mark{width:46px;height:46px;border-radius:10px;background:linear-gradient(180deg,var(--purple),var(--purple-dark));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    h1{font-size:1.15rem;margin:0}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:0.95rem}

    .card{background:#fff;border-radius:var(--card-radius);box-shadow:var(--shadow);overflow:hidden}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:16px}

    .form{padding:18px;display:flex;flex-direction:column;gap:12px}
    label{font-size:0.95rem;color:var(--muted)}
    .row{display:flex;gap:8px;align-items:center}
    input[type=number], select{padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:1rem}

    .options{display:flex;gap:8px;flex-wrap:wrap}
    .btn{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--purple);color:#fff}
    .btn.ghost{background:#fff;border:1px solid rgba(0,0,0,0.06)}

    .panel{padding:18px;border-left:1px solid rgba(0,0,0,0.04);display:flex;flex-direction:column;gap:12px}
    .stat{background:#fbf7ff;padding:12px;border-radius:10px;border:1px solid rgba(94,53,177,0.03)}
    .big{font-size:1.4rem;font-weight:800;color:var(--purple-dark)}
    .muted{color:var(--muted)}

    table{width:100%;border-collapse:collapse}
    td,th{padding:8px;border-bottom:1px solid rgba(0,0,0,0.04);text-align:right}
    th{text-align:left;background:#faf7ff;padding-top:12px}

    @media (max-width:980px){ .grid{grid-template-columns:1fr} .panel{border-left:none;border-top:1px solid rgba(0,0,0,0.04)} }
    @media (max-width:480px){ .logo-mark{width:40px;height:40px} }

    :focus{outline:3px solid rgba(94,53,177,0.12)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-mark">Ti</div>
      <div>
        <h1>GST Calculator</h1>
        <p class="lead">Compute GST-inclusive/exclusive prices, split CGST/SGST or IGST, choose rates and rounding. Purple themed.</p>
      </div>
    </header>

    <main class="card">
      <div class="grid">
        <section class="form" aria-labelledby="form-title">
          <h2 id="form-title" style="margin:0;font-size:1rem">Inputs</h2>

          <div>
            <label for="amount">Amount</label>
            <div class="row">
              <input id="amount" type="number" min="0" step="0.01" placeholder="0.00" aria-label="Amount" />
              <select id="mode" aria-label="Mode">
                <option value="exclusive">Price (GST exclusive)</option>
                <option value="inclusive">Price (GST inclusive)</option>
              </select>
            </div>
          </div>

          <div>
            <label for="gstRate">GST rate (%)</label>
            <div class="row">
              <select id="gstRate" aria-label="GST rate">
                <option value="0">0%</option>
                <option value="0.125">0.125% (0.125)</option>
                <option value="0.25">0.25%</option>
                <option value="0.5">0.5%</option>
                <option value="3">3%</option>
                <option value="5">5%</option>
                <option value="12">12%</option>
                <option value="18" selected>18%</option>
                <option value="28">28%</option>
              </select>
              <div style="flex:1"></div>
              <label class="small"><input type="checkbox" id="isInterstate"> Interstate (IGST)</label>
            </div>
          </div>

          <div>
            <label>Rounding & precision</label>
            <div class="row">
              <select id="roundMode">
                <option value="none">No rounding</option>
                <option value="round">Round to nearest</option>
                <option value="ceil">Round up</option>
                <option value="floor">Round down</option>
              </select>
              <input id="precision" type="number" min="0" max="4" value="2" style="width:80px" aria-label="Decimal places" />
              <div style="flex:1"></div>
              <label class="small"><input type="checkbox" id="showBreakdown" checked> Show tax breakdown</label>
            </div>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <button id="calcBtn" class="btn primary"><i class="fa-solid fa-calculator"></i> Calculate</button>
            <button id="resetBtn" class="btn ghost">Reset</button>
            <button id="copyBtn" class="btn ghost"><i class="fa-solid fa-copy"></i> Copy</button>
            <div style="flex:1"></div>
            <button id="downloadBtn" class="btn ghost"><i class="fa-solid fa-download"></i> Download CSV</button>
          </div>

          <div class="small">All calculations are performed locally in your browser. No data is uploaded.</div>
        </section>

        <aside class="panel" aria-labelledby="result-title">
          <h2 id="result-title" style="margin:0;font-size:1rem">Results</h2>

          <div class="stat">
            <div class="muted">Net / Base price</div>
            <div class="big" id="basePrice">₹0.00</div>
          </div>

          <div class="stat">
            <div class="muted">GST amount</div>
            <div class="big" id="gstAmount">₹0.00</div>
            <div class="muted small" id="gstPercent">—</div>
          </div>

          <div class="stat" id="splitPanel" style="display:none">
            <div class="muted">Tax split</div>
            <table>
              <tbody id="splitTable">
                <!-- CGST/SGST or IGST rows -->
              </tbody>
            </table>
          </div>

          <div class="stat">
            <div class="muted">Total price</div>
            <div class="big" id="totalPrice">₹0.00</div>
          </div>

          <div style="margin-top:6px">
            <div class="small">Quick summary</div>
            <pre id="summary" style="white-space:pre-wrap;background:#fff;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.04);max-height:160px;overflow:auto"></pre>
          </div>
        </aside>
      </div>
    </main>
  </div>

  <script>
    // Elements
    const amountEl = document.getElementById('amount');
    const modeEl = document.getElementById('mode');
    const gstRateEl = document.getElementById('gstRate');
    const isInterstateEl = document.getElementById('isInterstate');
    const roundModeEl = document.getElementById('roundMode');
    const precisionEl = document.getElementById('precision');
    const showBreakdownEl = document.getElementById('showBreakdown');
    const calcBtn = document.getElementById('calcBtn');
    const resetBtn = document.getElementById('resetBtn');
    const copyBtn = document.getElementById('copyBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    const basePriceEl = document.getElementById('basePrice');
    const gstAmountEl = document.getElementById('gstAmount');
    const gstPercentEl = document.getElementById('gstPercent');
    const totalPriceEl = document.getElementById('totalPrice');
    const splitPanel = document.getElementById('splitPanel');
    const splitTable = document.getElementById('splitTable');
    const summaryEl = document.getElementById('summary');

    function fmt(n, p=2){ return '₹' + Number(n).toLocaleString(undefined, {minimumFractionDigits:p, maximumFractionDigits:p}); }
    function roundValue(v, mode, p){ const m = Math.pow(10,p||0); if(mode==='round') return Math.round(v*m)/m; if(mode==='ceil') return Math.ceil(v*m)/m; if(mode==='floor') return Math.floor(v*m)/m; return v; }

    function calculate(){
      const raw = parseFloat(amountEl.value) || 0;
      const mode = modeEl.value; // exclusive or inclusive
      const rate = parseFloat(gstRateEl.value) || 0; // percent
      const isInterstate = isInterstateEl.checked;
      const roundMode = roundModeEl.value;
      const precision = parseInt(precisionEl.value) || 2;

      if(raw < 0){ alert('Enter a valid amount'); return; }

      // GST amount and base calculation
      let base = 0, gstAmt = 0, total = 0;
      if(mode === 'exclusive'){
        base = raw;
        gstAmt = (base * rate) / 100;
        total = base + gstAmt;
      } else {
        total = raw;
        base = (total * 100) / (100 + rate);
        gstAmt = total - base;
      }

      // apply rounding
      base = roundValue(base, roundMode, precision);
      gstAmt = roundValue(gstAmt, roundMode, precision);
      total = roundValue(total, roundMode, precision);

      // split tax
      let split = [];
      if(showBreakdownEl.checked){
        if(isInterstate){ // IGST = gstAmt
          split.push({label:'IGST', rate: rate, amount: gstAmt});
        } else {
          // split half-half CGST/SGST
          const halfRate = rate/2;
          const halfAmt = roundValue(gstAmt/2, roundMode, precision);
          // adjust rounding difference on second half
          const otherHalfAmt = roundValue(gstAmt - halfAmt, roundMode, precision);
          split.push({label:'CGST', rate: halfRate, amount: halfAmt});
          split.push({label:'SGST', rate: halfRate, amount: otherHalfAmt});
        }
      }

      // render
      basePriceEl.textContent = fmt(base, precision);
      gstAmountEl.textContent = fmt(gstAmt, precision);
      gstPercentEl.textContent = `Rate: ${rate}% (${mode === 'exclusive' ? 'exclusive' : 'inclusive'})`;
      totalPriceEl.textContent = fmt(total, precision);

      if(split.length){
        splitPanel.style.display = '';
        splitTable.innerHTML = '';
        split.forEach(s=>{
          const tr = document.createElement('tr');
          tr.innerHTML = `<td style="text-align:left">${s.label} (${s.rate}%)</td><td>${fmt(s.amount, precision)}</td>`;
          splitTable.appendChild(tr);
        });
      } else {
        splitPanel.style.display = 'none';
        splitTable.innerHTML = '';
      }

      // summary text
      let summary = '';
      summary += `Mode: ${mode}\n`;
      summary += `Amount entered: ${raw}\n`;
      summary += `Base price: ${base}\n`;
      summary += `GST (${rate}%): ${gstAmt}\n`;
      if(split.length){ split.forEach(s=> summary += `${s.label} (${s.rate}%): ${s.amount}\n`); }
      summary += `Total: ${total}\n`;
      summaryEl.textContent = summary;

      // store last computed for copy/download
      lastComputed = {raw, mode, rate, base, gstAmt, total, split, precision};
    }

    let lastComputed = null;

    calcBtn.addEventListener('click', calculate);
    resetBtn.addEventListener('click', ()=>{
      amountEl.value = '';
      gstRateEl.value = '18';
      modeEl.value = 'exclusive';
      isInterstateEl.checked = false;
      roundModeEl.value = 'none';
      precisionEl.value = 2;
      showBreakdownEl.checked = true;
      basePriceEl.textContent = '₹0.00'; gstAmountEl.textContent = '₹0.00'; totalPriceEl.textContent = '₹0.00'; gstPercentEl.textContent = '—'; splitPanel.style.display='none'; summaryEl.textContent = '';
      lastComputed = null;
    });

    copyBtn.addEventListener('click', async ()=>{
      if(!lastComputed){ alert('No calculation to copy'); return; }
      try{ await navigator.clipboard.writeText(summaryEl.textContent); copyBtn.textContent = 'Copied'; setTimeout(()=> copyBtn.innerHTML = '<i class="fa-solid fa-copy"></i> Copy',1000); }catch(e){ alert('Copy failed'); }
    });

    downloadBtn.addEventListener('click', ()=>{
      if(!lastComputed){ alert('No calculation to download'); return; }
      // CSV with base,gst,label
      const rows = [['Label','Rate (%)','Amount']];
      rows.push(['Base', '', lastComputed.base]);
      rows.push(['GST', lastComputed.rate, lastComputed.gstAmt]);
      if(lastComputed.split && lastComputed.split.length){ lastComputed.split.forEach(s => rows.push([s.label, s.rate, s.amount])); }
      rows.push(['Total','', lastComputed.total]);
      const csv = rows.map(r => r.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'gst-summary.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(a.href);
    });

    // quick keyboard shortcuts
    document.addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='s'){ e.preventDefault(); calculate(); } });

    // initial state
    (function init(){
      gstRateEl.value = '18';
      precisionEl.value = 2;
    })();
  </script>
</body>
</html>
